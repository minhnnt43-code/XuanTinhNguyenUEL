<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Xu√¢n T√¨nh Nguy·ªán 2026</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'UTM Avo';
            src: url('fonts/UTM-Avo.woff2') format('woff2'),
                url('fonts/UTM-Avo.woff') format('woff'),
                url('fonts/UTM-Avo.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
    </style>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- SheetJS for Excel Import/Export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <!-- QR Code Styling for Card QR -->
    <script src="https://unpkg.com/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>

    <!-- SweetAlert2 for beautiful dialogs -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/activity.css">
    <link rel="stylesheet" href="css/animations.css">

    <!-- Critical Mobile Styles - DROPDOWN MENU -->
    <style>
        @media (max-width: 900px) {
            .mobile-menu-toggle {
                display: block !important;
                position: fixed !important;
                top: 15px !important;
                left: 15px !important;
                z-index: 200 !important;
            }

            .sidebar {
                display: none !important;
            }

            .mobile-dropdown-menu {
                display: none;
                position: fixed;
                top: 60px;
                left: 10px;
                right: 10px;
                background: linear-gradient(180deg, #FFFDE7 0%, #FFF9C4 100%);
                border-radius: 16px;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
                z-index: 190;
                max-height: 70vh;
                overflow-y: auto;
                padding: 15px;
                border: 2px solid #FFD700;
            }

            .mobile-dropdown-menu.active {
                display: block !important;
            }

            .mobile-dropdown-menu .menu-item {
                display: block;
                padding: 12px 15px;
                margin: 5px 0;
                background: white;
                border-radius: 10px;
                text-decoration: none;
                color: #1f2937;
                font-weight: 500;
                cursor: pointer;
            }

            .mobile-dropdown-menu .menu-item:active {
                background: #FFD700;
            }

            .mobile-dropdown-menu .menu-section-title {
                font-weight: 700;
                color: #00723F;
                padding: 10px 5px 5px;
                font-size: 0.85rem;
            }

            .sidebar-overlay.active {
                display: block !important;
                opacity: 1 !important;
            }

            .main-content {
                margin-left: 0 !important;
                padding-top: 70px !important;
            }
        }

        @media (min-width: 901px) {
            .mobile-dropdown-menu {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle Menu">
        <i class="fa-solid fa-bars"></i>
    </button>

    <!-- Mobile Dropdown Menu -->
    <nav class="mobile-dropdown-menu" id="mobile-dropdown-menu">
        <div class="menu-section-title">üìä T·ªïng quan</div>
        <a class="menu-item" data-section="section-dashboard">üè† T·ªïng quan</a>

        <div class="menu-section-title">üõ†Ô∏è C√¥ng c·ª•</div>
        <a class="menu-item" data-section="section-avatar">üñºÔ∏è T·∫°o Avatar</a>
        <a class="menu-item" data-section="section-card">ü™™ T·∫°o Th·∫ª Chi·∫øn sƒ©</a>

        <div class="menu-section-title">üë• Qu·∫£n l√Ω</div>
        <a class="menu-item" data-section="section-activities">üìÖ Qu·∫£n l√Ω Ho·∫°t ƒë·ªông</a>
        <a class="menu-item" data-section="section-members">üë• Danh s√°ch Chi·∫øn sƒ©</a>
        <a class="menu-item" data-section="section-cards-admin">ü™™ Qu·∫£n tr·ªã Th·∫ª</a>
        <a class="menu-item" data-section="section-teams">üéØ ƒê·ªôi h√¨nh</a>

        <div style="border-top: 1px solid #ddd; margin: 15px 0;"></div>
        <a class="menu-item" id="mobile-logout" style="color: #dc2626;">üö™ ƒêƒÉng xu·∫•t</a>
    </nav>

    <!-- Sidebar Overlay (for mobile) -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <div class="dashboard-wrapper">
        <!-- ===== SIDEBAR ===== -->
        <aside class="sidebar" id="sidebar">
            <!-- User Info -->
            <div class="sidebar-user">
                <div class="user-avatar">
                    <img id="user-avatar-img" src="images/default-avatar.png" alt="Avatar">
                </div>
                <p class="user-greeting">Xin ch√†o,</p>
                <h3 class="user-name" id="user-name">ƒêang t·∫£i...</h3>
            </div>

            <!-- Clock -->
            <div class="sidebar-clock">
                <div class="clock-time" id="clock-time">--:--:--</div>
                <div class="clock-date" id="clock-date">--/--/----</div>
            </div>

            <!-- Menu -->
            <nav class="sidebar-menu">
                <!-- T·ªïng quan - ch·ªâ BCH -->
                <div class="menu-item active" id="menu-dashboard" data-section="section-dashboard">
                    <i class="fa-solid fa-chart-pie"></i> T·ªïng quan
                </div>


                <!-- Member+ -->
                <div class="menu-section" id="menu-tools">
                    <div class="menu-section-title">
                        <i class="fa-solid fa-toolbox"></i> C√¥ng c·ª•
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="menu-submenu">
                        <div class="menu-item" data-section="section-avatar">
                            <i class="fa-solid fa-image"></i> T·∫°o Avatar
                        </div>
                        <div class="menu-item" data-section="section-card">
                            <i class="fa-solid fa-id-card"></i> T·∫°o Th·∫ª Chi·∫øn sƒ©
                        </div>
                    </div>
                </div>

                <!-- BCH ƒê·ªôi+ -->
                <div class="menu-item" id="menu-activity" data-section="section-activity">
                    <i class="fa-solid fa-calendar-check"></i> Qu·∫£n l√Ω Ho·∫°t ƒë·ªông
                </div>

                <!-- Super Admin -->
                <div class="menu-section" id="menu-system">
                    <div class="menu-section-title">
                        <i class="fa-solid fa-users-gear"></i> Qu·∫£n l√Ω Chi·∫øn sƒ©
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="menu-submenu">

                        <div class="menu-item" data-section="section-members">
                            <i class="fa-solid fa-users"></i> Danh s√°ch Chi·∫øn sƒ©
                        </div>
                        <div class="menu-item" data-section="section-cards-admin">
                            <i class="fa-solid fa-id-card"></i> Qu·∫£n tr·ªã Th·∫ª
                        </div>
                        <div class="menu-item" data-section="section-teams">
                            <i class="fa-solid fa-people-group"></i> ƒê·ªôi h√¨nh
                        </div>

                        <div class="menu-item" data-section="section-settings">
                            <i class="fa-solid fa-gear"></i> C√†i ƒë·∫∑t
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Logout -->
            <div class="sidebar-footer">
                <a href="index.html" class="btn-home"
                    style="display:flex;align-items:center;gap:8px;padding:10px 16px;background:#059669;color:white;text-decoration:none;border-radius:8px;margin-bottom:10px;font-weight:500;transition:all 0.2s;">
                    <i class="fa-solid fa-house"></i> V·ªÅ trang ch·ªß
                </a>
                <button id="btn-logout" class="btn-logout">
                    <i class="fa-solid fa-right-from-bracket"></i> ƒêƒÉng xu·∫•t
                </button>
            </div>
        </aside>

        <!-- ===== MAIN CONTENT ===== -->
        <main class="main-content">
            <!-- Section: Loading -->
            <section id="section-loading" class="section active">
                <div class="loading-container">
                    <i class="fa-solid fa-circle-notch fa-spin fa-3x"></i>
                    <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
                </div>
            </section>

            <!-- Section: Dashboard/T·ªïng quan -->
            <section id="section-dashboard" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-chart-pie"></i> T·ªïng quan</h1>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fa-solid fa-users"></i>
                        <h3 id="stat-members">0</h3>
                        <p>Chi·∫øn sƒ©</p>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-people-group"></i>
                        <h3 id="stat-teams">0</h3>
                        <p>ƒê·ªôi h√¨nh</p>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-calendar-check"></i>
                        <h3 id="stat-activities">0</h3>
                        <p>Ho·∫°t ƒë·ªông</p>
                    </div>
                </div>

                <!-- AI Insights Widget -->
                <div class="card ai-insights-card" id="ai-insights-widget" style="margin-top: 20px;">
                    <div class="ai-insights-header">
                        <h3><i class="fa-solid fa-robot"></i> AI Insights</h3>
                        <button id="btn-refresh-insights" class="btn btn-sm btn-secondary" title="L√†m m·ªõi">
                            <i class="fa-solid fa-sync-alt"></i>
                        </button>
                    </div>
                    <div id="ai-insights-content" class="ai-insights-content">
                        <div class="ai-loading">
                            <i class="fa-solid fa-circle-notch fa-spin"></i>
                            <span>ƒêang ph√¢n t√≠ch d·ªØ li·ªáu...</span>
                        </div>
                    </div>
                    <div class="ai-insights-actions" style="margin-top: 15px; display: none;" id="ai-insights-actions">
                        <button id="btn-ai-detail-report" class="btn btn-sm btn-primary">
                            <i class="fa-solid fa-file-alt"></i> T·∫°o b√°o c√°o chi ti·∫øt
                        </button>
                        <button id="btn-ai-team-analysis" class="btn btn-sm btn-secondary" style="margin-left: 10px;">
                            <i class="fa-solid fa-users-gear"></i> AI Ph√¢n t√≠ch ƒê·ªôi
                        </button>
                    </div>
                </div>

                <!-- AI Team Analysis Modal -->
                <div id="modal-team-analysis" class="modal" style="display: none;">
                    <div class="modal-content" style="max-width: 700px;">
                        <div class="modal-header"
                            style="background: linear-gradient(135deg, #8b5cf6, #6d28d9); color: white;">
                            <h2><i class="fa-solid fa-users-gear"></i> AI Ph√¢n t√≠ch ƒê·ªôi h√¨nh</h2>
                            <button class="modal-close" onclick="closeTeamAnalysisModal()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Ch·ªçn ƒë·ªôi h√¨nh ƒë·ªÉ ph√¢n t√≠ch:</label>
                                <select id="select-team-analysis" class="form-control">
                                    <option value="">-- Ch·ªçn ƒë·ªôi --</option>
                                </select>
                            </div>
                            <div id="team-analysis-result" style="display: none; margin-top: 20px;">
                                <div id="team-analysis-content" style="white-space: pre-wrap; line-height: 1.6;"></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary"
                                onclick="closeTeamAnalysisModal()">ƒê√≥ng</button>
                            <button type="button" id="btn-run-team-analysis" class="btn btn-primary"
                                onclick="runTeamAnalysis()">
                                <i class="fa-solid fa-wand-magic-sparkles"></i> Ph√¢n t√≠ch
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ƒê√É X√ìA: Section ƒêƒÉng k√Ω Chi·∫øn sƒ© v√† Section Ch·ªù duy·ªát (chuy·ªÉn sang Google Form) -->


            <!-- Section: T·∫°o Avatar -->
            <section id="section-avatar" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-image"></i> T·∫°o Avatar XTN 2026</h1>
                    <p>T·∫£i ·∫£nh ch√¢n dung l√™n, ƒëi·ªÅu ch·ªânh v√† t·∫£i v·ªÅ avatar chi·∫øn d·ªãch!</p>
                </div>

                <div class="two-column">
                    <!-- C·ªôt ƒëi·ªÅu khi·ªÉn -->
                    <div class="left-col">
                        <div class="card">
                            <h3><i class="fa-solid fa-upload"></i> 1. T·∫£i ·∫£nh l√™n</h3>
                            <div id="avatar-upload-area" style="text-align:center; padding:20px;">
                                <input type="file" id="avatar-upload" accept="image/*" style="display:none;">
                                <button type="button" class="btn btn-primary btn-lg" id="btn-avatar-upload"
                                    style="padding:15px 40px; font-size:1.1rem;">
                                    <i class="fa-solid fa-image"></i> T·∫£i ·∫£nh l√™n
                                </button>
                                <p id="avatar-upload-status" style="margin-top:10px; color:#666;"></p>
                            </div>
                        </div>

                        <div class="card" style="margin-top: 15px;">
                            <h3><i class="fa-solid fa-sliders"></i> 2. ƒêi·ªÅu ch·ªânh</h3>
                            <div class="form-group">
                                <label for="avatar-zoom">Ph√≥ng to / Thu nh·ªè</label>
                                <input type="range" id="avatar-zoom" class="zoom-slider" min="0.5" max="3" step="0.01"
                                    value="1">
                            </div>
                            <div class="tip-box">
                                <i class="fa-solid fa-lightbulb"></i>
                                <strong>M·∫πo:</strong> D√πng con lƒÉn chu·ªôt ho·∫∑c k√©o ·∫£nh tr√™n khung xem tr∆∞·ªõc ƒë·ªÉ ƒëi·ªÅu
                                ch·ªânh.
                            </div>
                        </div>
                    </div>

                    <!-- C·ªôt xem tr∆∞·ªõc -->
                    <div class="right-col">
                        <div class="card preview-card">
                            <h3><i class="fa-solid fa-eye"></i> 3. Xem tr∆∞·ªõc & T·∫£i v·ªÅ</h3>
                            <div class="canvas-wrapper avatar-wrapper">
                                <canvas id="avatar-canvas" width="1000" height="1000"></canvas>
                            </div>
                            <button id="btn-avatar-download" class="btn btn-success btn-block" disabled>
                                <i class="fa-solid fa-download"></i> T·∫£i Avatar v·ªÅ m√°y
                            </button>
                            <button id="btn-avatar-reset" class="btn btn-secondary btn-block"
                                style="margin-top: 10px; display: none;">
                                <i class="fa-solid fa-rotate-left"></i> T·∫°o l·∫°i t·ª´ ƒë·∫ßu
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: T·∫°o Th·∫ª Chi·∫øn sƒ© -->
            <section id="section-card" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-id-card"></i> T·∫°o Th·∫ª Chi·∫øn sƒ© XTN 2026</h1>
                    <p>ƒêi·ªÅn th√¥ng tin v√† t·∫£i ·∫£nh ƒë·ªÉ t·∫°o th·∫ª chi·∫øn sƒ©</p>
                </div>
                <div class="two-column">
                    <div class="left-col">
                        <div class="card">
                            <h3><i class="fa-solid fa-file-pen"></i> Nh·∫≠p th√¥ng tin</h3>
                            <form id="card-form">
                                <div class="form-group">
                                    <label>H·ªç v√† t√™n <span class="required">*</span></label>
                                    <input type="text" id="card-name" placeholder="Nguy·ªÖn VƒÉn A" required>
                                </div>
                                <div class="form-group">
                                    <label>MSSV / MSCB</label>
                                    <input type="text" id="card-mssv" placeholder="Nh·∫≠p m√£ s·ªë sinh vi√™n">
                                </div>
                                <div class="form-group">
                                    <label>Vai tr√≤ <i class="fa-solid fa-lock" style="color:#888;"
                                            title="T·ª± ƒë·ªông l·∫•y t·ª´ h·ªá th·ªëng"></i></label>
                                    <input type="text" id="card-role" readonly class="readonly-field"
                                        placeholder="Chi·∫øn sƒ©" title="Vai tr√≤ ƒë∆∞·ª£c g√°n t·ª´ h·ªá th·ªëng">
                                </div>
                                <div class="form-group">
                                    <label>ƒê·ªôi h√¨nh <i class="fa-solid fa-lock" style="color:#888;"
                                            title="T·ª± ƒë·ªông l·∫•y t·ª´ h·ªá th·ªëng"></i></label>
                                    <input type="text" id="card-team" readonly class="readonly-field"
                                        placeholder="Ch∆∞a ph√¢n ƒë·ªôi" title="ƒê·ªôi h√¨nh ƒë∆∞·ª£c g√°n t·ª´ h·ªá th·ªëng">
                                </div>
                                <div class="form-group">
                                    <label>·∫¢nh ch√¢n dung</label>
                                    <div
                                        style="text-align:center; padding:15px; border:2px dashed #ddd; border-radius:10px;">
                                        <input type="file" id="card-photo" accept="image/*" style="display:none;">
                                        <button type="button" class="btn btn-primary" id="btn-card-photo"
                                            style="padding:12px 30px;">
                                            <i class="fa-solid fa-image"></i> T·∫£i ·∫£nh l√™n
                                        </button>
                                        <p id="card-photo-label" style="margin-top:8px; color:#666; font-size:0.85rem;">
                                        </p>
                                    </div>
                                </div>
                                <div class="form-group" id="card-zoom-group" style="display:none;">
                                    <label>Ph√≥ng to / Thu nh·ªè</label>
                                    <input type="range" id="card-zoom" class="zoom-slider" min="0.5" max="3" step="0.01"
                                        value="1">
                                    <div class="tip-box">
                                        <i class="fa-solid fa-lightbulb"></i>
                                        <strong>M·∫πo:</strong> D√πng con lƒÉn chu·ªôt ho·∫∑c k√©o ·∫£nh tr√™n khung xem tr∆∞·ªõc.
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="fa-solid fa-rotate"></i> C·∫≠p nh·∫≠t th·∫ª
                                </button>
                            </form>
                        </div>

                        <!-- Th·∫ª C·∫•p Th√†nh ph·ªë -->
                        <div class="card" style="margin-top:20px;">
                            <h3><i class="fa-solid fa-city"></i> Th·∫ª C·∫•p Th√†nh ph·ªë</h3>
                            <p style="color:#666; font-size:0.9rem; margin-bottom:15px;">
                                N·∫øu b·∫°n c√≥ th·∫ª c·∫•p th√†nh ph·ªë, h√£y nh·∫≠p link Google Drive b√™n d∆∞·ªõi.
                            </p>
                            <div class="form-group">
                                <label>Link Drive Th·∫ª Th√†nh ph·ªë</label>
                                <input type="url" id="card-city-link" placeholder="https://drive.google.com/file/d/..."
                                    class="form-control">
                            </div>
                            <button type="button" id="btn-save-city-card" class="btn btn-secondary btn-block">
                                <i class="fa-solid fa-save"></i> L∆∞u Link Th·∫ª
                            </button>
                        </div>
                    </div>
                    <div class="right-col">
                        <div class="card preview-card">
                            <h3><i class="fa-solid fa-eye"></i> Xem tr∆∞·ªõc th·∫ª</h3>
                            <div class="canvas-wrapper card-wrapper">
                                <canvas id="card-canvas" width="1100" height="1700"></canvas>
                            </div>
                            <div style="display:flex; gap:10px; flex-wrap:wrap;">
                                <button id="btn-card-download" class="btn btn-success" style="flex:1;" disabled>
                                    <i class="fa-solid fa-download"></i> T·∫£i v·ªÅ
                                </button>
                                <button id="btn-card-confirm" class="btn btn-primary" style="flex:1;" disabled>
                                    <i class="fa-solid fa-check-circle"></i> ƒê√£ t·∫°o th·∫ª
                                </button>
                            </div>
                            <div id="card-confirm-status" style="margin-top:10px; text-align:center;"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: Qu·∫£n l√Ω Ho·∫°t ƒë·ªông -->
            <section id="section-activities" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-calendar-check"></i> Qu·∫£n l√Ω Ho·∫°t ƒë·ªông</h1>
                </div>

                <!-- AI Toolbar - T·∫†M T·∫ÆT, L√ÄM SAU
                <div class="card"
                    style="margin-bottom:15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white;">
                    <div style="display:flex; align-items:center; gap:15px; flex-wrap:wrap;">
                        <div style="flex:1;">
                            <h3 style="margin:0; display:flex; align-items:center; gap:8px;">
                                <i class="fa-solid fa-robot"></i> AI Assistant
                            </h3>
                            <p style="margin:5px 0 0; opacity:0.9; font-size:14px;">S·ª≠ d·ª•ng AI ƒë·ªÉ t·∫°o ho·∫°t ƒë·ªông v√† b√°o
                                c√°o nhanh ch√≥ng</p>
                        </div>
                        <div style="display:flex; gap:10px;">
                            <button id="btn-ai-create-activity" class="btn"
                                style="background:rgba(255,255,255,0.2); color:white; border:1px solid rgba(255,255,255,0.3);">
                                <i class="fa-solid fa-wand-magic-sparkles"></i> T·∫°o ho·∫°t ƒë·ªông AI
                            </button>
                            <button id="btn-ai-report" class="btn"
                                style="background:rgba(255,255,255,0.2); color:white; border:1px solid rgba(255,255,255,0.3);">
                                <i class="fa-solid fa-file-lines"></i> B√°o c√°o AI
                            </button>
                        </div>
                    </div>
                </div>
                -->

                <div class="card">
                    <div id="activities-list">
                        <p style="text-align:center;color:#888;">ƒêang t·∫£i danh s√°ch ho·∫°t ƒë·ªông...</p>
                    </div>
                </div>
            </section>

            <!-- Modal AI Create Activity -->
            <div id="modal-ai-activity" class="modal-overlay" style="display:none;">
                <div class="modal-content modal-lg">
                    <button class="modal-close" onclick="closeAIActivityModal()">&times;</button>
                    <h2><i class="fa-solid fa-wand-magic-sparkles"></i> AI T·∫°o Ho·∫°t ƒë·ªông</h2>
                    <p style="color:#666;">M√¥ t·∫£ ho·∫°t ƒë·ªông b·∫±ng ng√¥n ng·ªØ t·ª± nhi√™n, AI s·∫Ω t·ª± ƒë·ªông ƒëi·ªÅn form cho b·∫°n.</p>

                    <div class="form-group">
                        <label>M√¥ t·∫£ ho·∫°t ƒë·ªông:</label>
                        <textarea id="ai-activity-input" rows="4"
                            placeholder="VD: T·ªï ch·ª©c d·ªçn v·ªá sinh c√¥ng vi√™n Tao ƒê√†n v√†o s√°ng th·ª© 7 ng√†y 15/1/2025, d·ª± ki·∫øn 50 sinh vi√™n tham gia, ƒë·ªãa ƒëi·ªÉm t·∫≠p trung l√† c·ªïng ch√≠nh..."></textarea>
                    </div>

                    <div id="ai-activity-result" style="display:none;">
                        <h4>K·∫øt qu·∫£ AI:</h4>
                        <div id="ai-activity-preview" class="card" style="background:#f8f9fa;"></div>
                    </div>

                    <div class="modal-actions" style="margin-top:20px;">
                        <button class="btn btn-secondary" onclick="closeAIActivityModal()">ƒê√≥ng</button>
                        <button id="btn-ai-generate" class="btn btn-primary">
                            <i class="fa-solid fa-sparkles"></i> T·∫°o v·ªõi AI
                        </button>
                        <button id="btn-ai-apply" class="btn btn-success" style="display:none;">
                            <i class="fa-solid fa-check"></i> √Åp d·ª•ng v√†o Form
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal AI Report -->
            <div id="modal-ai-report" class="modal-overlay" style="display:none;">
                <div class="modal-content modal-lg">
                    <button class="modal-close" onclick="closeAIReportModal()">&times;</button>
                    <h2><i class="fa-solid fa-file-lines"></i> AI T·∫°o B√°o c√°o</h2>

                    <div class="form-row" style="margin-bottom:15px;">
                        <div class="form-group">
                            <label>Lo·∫°i b√°o c√°o:</label>
                            <select id="ai-report-type">
                                <option value="summary">T√≥m t·∫Øt</option>
                                <option value="detailed">Chi ti·∫øt</option>
                                <option value="statistics">Th·ªëng k√™</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ph·∫°m vi:</label>
                            <select id="ai-report-range">
                                <option value="all">To√†n b·ªô</option>
                                <option value="week">Tu·∫ßn n√†y</option>
                                <option value="month">Th√°ng n√†y</option>
                            </select>
                        </div>
                    </div>

                    <button id="btn-ai-generate-report" class="btn btn-primary" style="margin-bottom:15px;">
                        <i class="fa-solid fa-sparkles"></i> T·∫°o B√°o c√°o
                    </button>

                    <div id="ai-report-result" style="display:none;">
                        <h4>B√°o c√°o:</h4>
                        <div id="ai-report-content" class="card"
                            style="background:#f8f9fa; max-height:400px; overflow-y:auto; white-space:pre-wrap;"></div>
                        <button id="btn-copy-report" class="btn btn-secondary" style="margin-top:10px;">
                            <i class="fa-solid fa-copy"></i> Copy n·ªôi dung
                        </button>
                    </div>
                </div>
            </div>

            <!-- Section: Th√™m ho·∫°t ƒë·ªông -->
            <section id="section-add-activity" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-plus"></i> Th√™m ho·∫°t ƒë·ªông m·ªõi</h1>
                </div>
                <div class="card" style="max-width:600px;">
                    <form id="activity-form">
                        <div class="form-group">
                            <label>T√™n ho·∫°t ƒë·ªông</label>
                            <input type="text" id="act-name" required placeholder="VD: D·ªçn v·ªá sinh c√¥ng vi√™n">
                        </div>
                        <div class="form-group">
                            <label>Ng√†y th·ª±c hi·ªán</label>
                            <input type="date" id="act-date" required>
                        </div>
                        <div class="form-group">
                            <label>S·ªë ng∆∞·ªùi tham gia</label>
                            <input type="number" id="act-participants" required placeholder="20">
                        </div>
                        <div class="form-group">
                            <label>M√¥ t·∫£</label>
                            <textarea id="act-desc" rows="3" placeholder="M√¥ t·∫£ ho·∫°t ƒë·ªông..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">
                            <i class="fa-solid fa-save"></i> L∆∞u ho·∫°t ƒë·ªông
                        </button>
                    </form>
                </div>
            </section>

            <!-- Section: ƒê∆°n ƒëƒÉng k√Ω (Admin) -->
            <section id="section-registrations" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-user-clock"></i> ƒê∆°n ƒëƒÉng k√Ω</h1>
                    <p>Xem chi ti·∫øt v√† duy·ªát ƒë∆°n ƒëƒÉng k√Ω chi·∫øn sƒ©.</p>
                </div>

                <!-- Filter -->
                <div class="card" style="margin-bottom:15px;">
                    <div class="form-row">
                        <div class="form-group">
                            <label>L·ªçc theo ƒë·ªôi</label>
                            <select id="reg-filter-team" onchange="loadRegistrations()">
                                <option value="">-- T·∫•t c·∫£ ƒë·ªôi --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>L·ªçc theo tr·∫°ng th√°i</label>
                            <select id="reg-filter-status" onchange="loadRegistrations()">
                                <option value="">-- T·∫•t c·∫£ --</option>
                                <option value="pending">Ch·ªù duy·ªát</option>
                                <option value="pass">ƒê·∫°t</option>
                                <option value="consider">Xem x√©t</option>
                                <option value="fail">R·ªõt</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="btn-row" style="margin-bottom:15px;">
                        <button id="btn-delete-regs" class="btn-danger" onclick="deleteSelectedRegs()" disabled>
                            <i class="fa-solid fa-trash"></i> X√≥a ƒë√£ ch·ªçn (<span id="regs-selected-count">0</span>)
                        </button>
                    </div>
                    <div id="registrations-list">
                        <p style="text-align:center;color:#888;">ƒêang t·∫£i...</p>
                    </div>
                </div>
            </section>

            <!-- Modal Chi ti·∫øt ƒê∆°n ƒëƒÉng k√Ω -->
            <div id="modal-registration" class="modal-overlay" style="display:none;">
                <div class="modal-content modal-lg">
                    <button class="modal-close" onclick="closeRegistrationModal()">&times;</button>
                    <h2><i class="fa-solid fa-file-alt"></i> Chi ti·∫øt ƒë∆°n ƒëƒÉng k√Ω</h2>
                    <div id="modal-registration-content"></div>
                </div>
            </div>

            <!-- Section: Danh s√°ch Chi·∫øn sƒ© (Admin) -->
            <section id="section-members" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-users"></i> Danh s√°ch Chi·∫øn sƒ©</h1>
                </div>

                <!-- Excel Toolbar -->
                <div class="card" style="margin-bottom:15px;">
                    <div class="btn-row" style="gap:10px; flex-wrap:wrap;">
                        <button id="btn-add-member" class="btn btn-primary">
                            <i class="fa-solid fa-user-plus"></i> Th√™m chi·∫øn sƒ©
                        </button>
                        <button id="btn-export-excel" class="btn btn-success">
                            <i class="fa-solid fa-file-excel"></i> Xu·∫•t Excel
                        </button>
                        <button id="btn-import-excel" class="btn btn-warning">
                            <i class="fa-solid fa-upload"></i> Nh·∫≠p t·ª´ Excel
                        </button>
                        <button id="btn-download-template" class="btn btn-info">
                            <i class="fa-solid fa-download"></i> T·∫£i m·∫´u Import
                        </button>
                        <input type="file" id="excel-import-file" accept=".xlsx,.xls" style="display:none;">
                    </div>
                </div>

                <div class="card">
                    <div id="members-list">
                        <p style="text-align:center;color:#888;">ƒêang t·∫£i...</p>
                    </div>
                </div>
            </section>

            <!-- Modal Import Preview -->
            <div id="modal-import-preview" class="modal-overlay" style="display:none;">
                <div class="modal-content modal-lg">
                    <button class="modal-close" onclick="closeImportPreview()">&times;</button>
                    <h2><i class="fa-solid fa-file-import"></i> Xem tr∆∞·ªõc d·ªØ li·ªáu Import</h2>
                    <div id="import-preview-content"></div>
                    <div class="modal-actions" style="margin-top:20px;">
                        <button class="btn btn-secondary" onclick="closeImportPreview()">H·ªßy</button>
                        <button id="btn-confirm-import" class="btn btn-primary">
                            <i class="fa-solid fa-check"></i> X√°c nh·∫≠n Import
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal Add Member Manually -->
            <div id="modal-add-member" class="modal-overlay" style="display:none;">
                <div class="modal-content" style="max-width:500px;">
                    <button class="modal-close" onclick="closeAddMemberModal()">&times;</button>
                    <h2><i class="fa-solid fa-user-plus"></i> Th√™m Chi·∫øn sƒ© m·ªõi</h2>
                    <form id="form-add-member">
                        <div class="form-group">
                            <label>H·ªç v√† t√™n <span class="required">*</span></label>
                            <input type="text" id="new-member-name" required placeholder="Nguy·ªÖn VƒÉn A">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>MSSV</label>
                                <input type="text" id="new-member-mssv" placeholder="K21000001">
                            </div>
                            <div class="form-group">
                                <label>Email <span class="required">*</span></label>
                                <input type="email" id="new-member-email" required placeholder="abc@st.uel.edu.vn">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>S·ªë ƒëi·ªán tho·∫°i</label>
                                <input type="tel" id="new-member-phone" placeholder="0901234567">
                            </div>
                            <div class="form-group">
                                <label>ƒê·ªôi h√¨nh <span class="required">*</span></label>
                                <select id="new-member-team" required>
                                    <option value="">-- Ch·ªçn ƒë·ªôi h√¨nh --</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Vai tr√≤</label>
                            <select id="new-member-role">
                                <option value="member">Chi·∫øn sƒ©</option>
                                <option value="doihinh_admin">BCH ƒê·ªôi (ƒê·ªôi tr∆∞·ªüng/ƒê·ªôi ph√≥)</option>
                                <option value="kysutet_admin">ƒê·ªôi tr∆∞·ªüng/ƒê·ªôi ph√≥ K√Ω s·ª± T·∫øt</option>
                                <option value="super_admin">BCH Tr∆∞·ªùng (Super Admin)</option>
                                <option value="pending">Ch·ªù duy·ªát</option>
                            </select>
                        </div>
                        <div class="modal-actions" style="margin-top:20px;">
                            <button type="button" class="btn btn-secondary" onclick="closeAddMemberModal()">H·ªßy</button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Th√™m chi·∫øn sƒ©
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Section: ƒê·ªôi h√¨nh (Admin) -->
            <section id="section-teams" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-people-group"></i> Qu·∫£n l√Ω ƒê·ªôi h√¨nh</h1>
                    <p>Th√™m, s·ª≠a, x√≥a c√°c ƒë·ªôi h√¨nh. D·ªØ li·ªáu s·∫Ω hi·ªÉn th·ªã trong form ƒëƒÉng k√Ω.</p>
                </div>

                <!-- Form th√™m/s·ª≠a ƒë·ªôi -->
                <div class="card" style="margin-bottom:20px;">
                    <h3 id="team-form-title"><i class="fa-solid fa-plus"></i> Th√™m ƒë·ªôi m·ªõi</h3>
                    <form id="team-form">
                        <input type="hidden" id="team-edit-id">

                        <div class="form-group">
                            <label>T√™n ƒë·ªôi <span class="required">*</span></label>
                            <input type="text" id="team-name" required placeholder="ƒê·ªôi 1 - S·ª©c Kh·ªèe">
                        </div>

                        <h4 style="margin:15px 0 10px;color:#dc2626;"><i class="fa-solid fa-user-tie"></i> Ban Ch·ªâ huy
                            ƒê·ªôi</h4>

                        <!-- ƒê·ªôi tr∆∞·ªüng -->
                        <div class="bch-member">
                            <label class="bch-label">ƒê·ªôi tr∆∞·ªüng</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="team-captain-name" placeholder="H·ªç v√† t√™n">
                                </div>
                                <div class="form-group">
                                    <input type="email" id="team-captain-email" placeholder="Email">
                                </div>
                            </div>
                        </div>

                        <!-- ƒê·ªôi ph√≥ 1 -->
                        <div class="bch-member">
                            <label class="bch-label">ƒê·ªôi ph√≥ 1</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="team-vice1-name" placeholder="H·ªç v√† t√™n">
                                </div>
                                <div class="form-group">
                                    <input type="email" id="team-vice1-email" placeholder="Email">
                                </div>
                            </div>
                        </div>

                        <!-- ƒê·ªôi ph√≥ 2 -->
                        <div class="bch-member">
                            <label class="bch-label">ƒê·ªôi ph√≥ 2</label>
                            <div class="form-row">
                                <div class="form-group">
                                    <input type="text" id="team-vice2-name" placeholder="H·ªç v√† t√™n">
                                </div>
                                <div class="form-group">
                                    <input type="email" id="team-vice2-email" placeholder="Email">
                                </div>
                            </div>
                        </div>

                        <!-- Container cho ƒë·ªôi ph√≥ th√™m -->
                        <div id="extra-vice-container"></div>

                        <button type="button" class="btn btn-sm btn-secondary" onclick="addExtraVice()"
                            style="margin-bottom:15px;">
                            <i class="fa-solid fa-plus"></i> Th√™m ƒë·ªôi ph√≥
                        </button>

                        <div class="btn-row">
                            <button type="submit" class="btn btn-primary">
                                <i class="fa-solid fa-save"></i> L∆∞u ƒë·ªôi
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetTeamForm()">
                                <i class="fa-solid fa-rotate-left"></i> Reset
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Danh s√°ch ƒë·ªôi -->
                <div class="card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                        <h3 style="margin:0;"><i class="fa-solid fa-list"></i> Danh s√°ch ƒë·ªôi h√¨nh</h3>
                        <button class="btn btn-danger btn-sm" onclick="deleteSelectedTeams()" id="btn-delete-teams"
                            disabled>
                            <i class="fa-solid fa-trash"></i> X√≥a ƒë√£ ch·ªçn (<span id="teams-selected-count">0</span>)
                        </button>
                    </div>
                    <div id="teams-list">
                        <p style="text-align:center;color:#888;">ƒêang t·∫£i...</p>
                    </div>
                </div>
            </section>

            <!-- Section: Qu·∫£n l√Ω C√¢u h·ªèi (Admin) -->
            <section id="section-questions" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-circle-question"></i> Qu·∫£n l√Ω C√¢u h·ªèi</h1>
                    <p>Th√™m c√¢u h·ªèi ri√™ng cho t·ª´ng ƒë·ªôi h√¨nh ho·∫∑c c√¢u h·ªèi chung cho t·∫•t c·∫£.</p>
                </div>

                <!-- Form th√™m/s·ª≠a c√¢u h·ªèi -->
                <div class="card" style="margin-bottom:20px;">
                    <h3 id="question-form-title"><i class="fa-solid fa-plus"></i> Th√™m c√¢u h·ªèi m·ªõi</h3>
                    <form id="question-form">
                        <input type="hidden" id="q-edit-id">

                        <div class="form-group">
                            <label>N·ªôi dung c√¢u h·ªèi <span class="required">*</span></label>
                            <input type="text" id="q-content" required
                                placeholder="VD: B·∫°n c√≥ th·ªÉ tham gia t·∫≠p hu·∫•n kh√¥ng?">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>D√†nh cho ƒë·ªôi</label>
                                <select id="q-team">
                                    <option value="">-- T·∫•t c·∫£ ƒë·ªôi (C√¢u h·ªèi chung) --</option>
                                    <!-- Load t·ª´ xtn_teams -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label>B·∫Øt bu·ªôc tr·∫£ l·ªùi?</label>
                                <select id="q-required">
                                    <option value="false">Kh√¥ng b·∫Øt bu·ªôc</option>
                                    <option value="true">B·∫Øt bu·ªôc</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Th·ª© t·ª±</label>
                                <input type="number" id="q-order" value="1" min="1">
                            </div>
                        </div>

                        <div class="btn-row">
                            <button type="submit" class="btn btn-primary">
                                <i class="fa-solid fa-save"></i> L∆∞u c√¢u h·ªèi
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetQuestionForm()">
                                <i class="fa-solid fa-rotate-left"></i> Reset
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Danh s√°ch c√¢u h·ªèi -->
                <div class="card">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                        <h3 style="margin:0;"><i class="fa-solid fa-list"></i> Danh s√°ch c√¢u h·ªèi</h3>
                        <button class="btn btn-danger btn-sm" onclick="deleteSelectedQuestions()"
                            id="btn-delete-questions" disabled>
                            <i class="fa-solid fa-trash"></i> X√≥a ƒë√£ ch·ªçn (<span id="questions-selected-count">0</span>)
                        </button>
                    </div>
                    <div id="questions-list">
                        <p style="text-align:center;color:#888;">ƒêang t·∫£i...</p>
                    </div>
                </div>
            </section>

            <!-- Section: Qu·∫£n tr·ªã Th·∫ª (Admin) -->
            <section id="section-cards-admin" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-id-card"></i> Qu·∫£n tr·ªã Th·∫ª Chi·∫øn sƒ©</h1>
                    <p>Xem v√† qu·∫£n l√Ω th·∫ª chi·∫øn sƒ© ƒë√£ t·∫°o</p>
                </div>

                <!-- View: Ch·ªâ d√πng d·∫°ng b·∫£ng -->

                <!-- Toolbar -->
                <div class="card" style="margin-bottom:15px;">
                    <div class="form-row" style="align-items:center;">
                        <div class="form-group" style="flex:1;">
                            <input type="text" id="cards-search" placeholder="T√¨m theo t√™n, MSSV, ƒë·ªôi h√¨nh...">
                        </div>
                        <div class="form-group">
                            <select id="cards-filter-team">
                                <option value="">-- T·∫•t c·∫£ ƒë·ªôi --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select id="cards-filter-status">
                                <option value="">-- Th·∫ª Chi·∫øn sƒ© --</option>
                                <option value="created">ƒê√£ t·∫°o th·∫ª</option>
                                <option value="not-created">Ch∆∞a t·∫°o th·∫ª</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select id="cards-filter-city">
                                <option value="">-- Th·∫ª C·∫•p Th√†nh --</option>
                                <option value="has-city">C√≥ Th·∫ª C·∫•p Th√†nh</option>
                                <option value="no-city">Ch∆∞a c√≥ Th·∫ª C·∫•p Th√†nh</option>
                            </select>
                        </div>
                        <button id="btn-export-cards" class="btn btn-success">
                            <i class="fa-solid fa-file-excel"></i> Xu·∫•t Excel
                        </button>
                    </div>
                </div>

                <!-- Table View (default) -->
                <div id="cards-table-view" class="cards-view active">
                    <div class="card">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>H·ªç v√† T√™n</th>
                                    <th>MSSV</th>
                                    <th>ƒê·ªôi h√¨nh</th>
                                    <th>Th·∫ª Chi·∫øn sƒ©</th>
                                    <th>Th·∫ª C·∫•p Th√†nh</th>
                                    <th>Th·ªùi gian t·∫°o</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody id="cards-table-body">
                                <tr>
                                    <td colspan="8" style="text-align:center;color:#888;">ƒêang t·∫£i...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="cards-pagination" style="margin-top:15px;text-align:center;">
                    <button id="cards-prev-page" class="btn btn-sm" disabled>&laquo; Tr∆∞·ªõc</button>
                    <span id="cards-page-info" style="margin:0 15px;">Trang 1 / 1</span>
                    <button id="cards-next-page" class="btn btn-sm">Sau &raquo;</button>
                </div>
            </section>

            <!-- Section: Qu·∫£n l√Ω Ho·∫°t ƒë·ªông (t∆∞∆°ng t·ª± MHX) -->
            <section id="section-activity" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-calendar-check"></i> Qu·∫£n l√Ω Ho·∫°t ƒë·ªông</h1>
                    <p>Th·ªùi gian chi·∫øn d·ªãch: <strong>15/12/2025 - 15/02/2026</strong></p>
                </div>

                <!-- Tab Navigation -->
                <div class="activity-tabs">
                    <button class="activity-tab active" data-tab="calendar">
                        <i class="fa-solid fa-calendar-days"></i> L·ªãch ho·∫°t ƒë·ªông
                    </button>
                    <button class="activity-tab" data-tab="stats">
                        <i class="fa-solid fa-chart-bar"></i> Th·ªëng k√™
                    </button>
                    <button class="activity-tab" data-tab="report">
                        <i class="fa-solid fa-file-alt"></i> B√°o c√°o
                    </button>
                    <button class="activity-tab" data-tab="history">
                        <i class="fa-solid fa-clock-rotate-left"></i> L·ªãch s·ª≠
                    </button>
                </div>

                <!-- Tab Content: Calendar -->
                <div class="activity-tab-content active" id="tab-calendar">
                    <div class="calendar-toolbar">
                        <div class="calendar-nav">
                            <button id="btn-prev-week" class="btn btn-sm">
                                <i class="fa-solid fa-chevron-left"></i>
                            </button>
                            <span id="calendar-week-label">Tu·∫ßn 1 (15/12 - 21/12)</span>
                            <button id="btn-next-week" class="btn btn-sm">
                                <i class="fa-solid fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="calendar-actions">
                            <button id="btn-add-activity" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Th√™m ho·∫°t ƒë·ªông
                            </button>
                        </div>
                    </div>
                    <div class="calendar-wrapper">
                        <div class="calendar-grid" id="calendar-grid">
                            <!-- Generated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Stats -->
                <div class="activity-tab-content" id="tab-stats">
                    <div class="stats-toolbar">
                        <div class="stats-filters">
                            <select id="stats-team-filter">
                                <option value="">T·∫•t c·∫£ ƒë·ªôi h√¨nh</option>
                            </select>
                            <input type="date" id="stats-date-from" placeholder="T·ª´ ng√†y">
                            <input type="date" id="stats-date-to" placeholder="ƒê·∫øn ng√†y">
                            <button id="btn-stats-filter" class="btn btn-sm">
                                <i class="fa-solid fa-filter"></i> L·ªçc
                            </button>
                        </div>
                        <button id="btn-export-csv" class="btn btn-success btn-sm">
                            <i class="fa-solid fa-file-csv"></i> Xu·∫•t CSV
                        </button>
                    </div>
                    <div class="stats-summary">
                        <div class="stat-card mini">
                            <h3 id="stats-total">0</h3>
                            <p>T·ªïng ho·∫°t ƒë·ªông</p>
                        </div>
                        <div class="stat-card mini">
                            <h3 id="stats-hours">0</h3>
                            <p>Gi·ªù ho·∫°t ƒë·ªông</p>
                        </div>
                        <div class="stat-card mini">
                            <h3 id="stats-teams">0</h3>
                            <p>ƒê·ªôi tham gia</p>
                        </div>
                    </div>
                    <div class="card">
                        <table class="data-table" id="stats-table">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>Ng√†y</th>
                                    <th>Th·ªùi gian</th>
                                    <th>ƒê·ªôi h√¨nh</th>
                                    <th>ƒê·ªãa ƒëi·ªÉm</th>
                                    <th>N·ªôi dung</th>
                                    <th>ƒê·ªÅ xu·∫•t BCH</th>
                                    <th>TG C·∫≠p nh·∫≠t</th>
                                    <th>Ng∆∞·ªùi c·∫≠p nh·∫≠t</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="stats-tbody">
                                <!-- Generated by JS -->
                            </tbody>
                        </table>
                        <div class="table-pagination" id="stats-pagination"></div>
                    </div>
                </div>

                <!-- Tab Content: Report -->
                <div class="activity-tab-content" id="tab-report">
                    <!-- Export Report Section -->
                    <div class="export-report-section">
                        <h4><i class="fa-solid fa-file-export"></i> Xu·∫•t B√°o c√°o T·ªïng h·ª£p</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>T·ª´ ng√†y</label>
                                <input type="date" id="export-date-from">
                            </div>
                            <div class="form-group">
                                <label>ƒê·∫øn ng√†y</label>
                                <input type="date" id="export-date-to">
                            </div>
                            <div class="form-group">
                                <label>Ch·ªçn ƒê·ªôi h√¨nh</label>
                                <select id="export-team-select">
                                    <option value="">T·∫•t c·∫£ ƒê·ªôi h√¨nh</option>
                                </select>
                            </div>
                            <button id="btn-export-report" class="btn btn-success">
                                <i class="fa-solid fa-download"></i> Xu·∫•t File
                            </button>
                        </div>
                    </div>

                    <!-- Report Toolbar -->
                    <div class="report-toolbar"
                        style="display:flex; gap:15px; margin-bottom:20px; flex-wrap:wrap; align-items:center;">
                        <input type="text" id="report-search" placeholder="T√¨m theo ƒë·ªôi h√¨nh, n·ªôi dung..."
                            style="flex:1; min-width:200px;">
                        <input type="date" id="report-date-filter" placeholder="T√¨m theo ng√†y">
                        <select id="report-team-select" style="min-width:150px;">
                            <option value="">T·∫•t c·∫£ ƒê·ªôi h√¨nh</option>
                        </select>
                        <button id="btn-new-report" class="btn btn-success">
                            <i class="fa-solid fa-plus"></i> Th√™m b√°o c√°o m·ªõi
                        </button>
                        <button id="btn-ai-auto-report" class="btn btn-primary"
                            title="AI t·ª± ƒë·ªông t·∫°o b√°o c√°o t·ª´ d·ªØ li·ªáu ho·∫°t ƒë·ªông">
                            <i class="fa-solid fa-robot"></i> AI T·∫°o b√°o c√°o
                        </button>
                    </div>

                    <!-- Reports List -->
                    <div class="reports-list" id="reports-list">
                        <!-- Generated by JS -->
                        <div class="empty-state">
                            <i class="fa-solid fa-file-circle-question fa-3x"></i>
                            <p>Ch∆∞a c√≥ b√°o c√°o n√†o. Ch·ªçn ƒë·ªôi h√¨nh v√† nh·∫•n "Th√™m b√°o c√°o m·ªõi".</p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: History -->
                <div class="activity-tab-content" id="tab-history">
                    <div class="history-toolbar">
                        <input type="text" id="history-search" placeholder="T√¨m ki·∫øm...">
                        <select id="history-action-filter">
                            <option value="">T·∫•t c·∫£ h√†nh ƒë·ªông</option>
                            <option value="create">T·∫°o m·ªõi</option>
                            <option value="update">C·∫≠p nh·∫≠t</option>
                            <option value="delete">X√≥a</option>
                        </select>
                    </div>
                    <div class="history-list" id="history-list">
                        <!-- Generated by JS -->
                        <div class="empty-state">
                            <i class="fa-solid fa-clock-rotate-left fa-3x"></i>
                            <p>Ch∆∞a c√≥ l·ªãch s·ª≠ thay ƒë·ªïi.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: C√†i ƒë·∫∑t (Super Admin only) -->
            <section id="section-settings" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-gear"></i> C√†i ƒë·∫∑t h·ªá th·ªëng</h1>
                    <p>Ch·ªâ d√†nh cho Ban Ch·ªâ huy c·∫•p Tr∆∞·ªùng</p>
                </div>

                <div class="card">
                    <h3><i class="fa-solid fa-database"></i> Sao l∆∞u d·ªØ li·ªáu (JSON)</h3>
                    <p style="color:#666; margin-bottom:20px;">T·∫£i to√†n b·ªô d·ªØ li·ªáu v·ªÅ m√°y d∆∞·ªõi d·∫°ng JSON ƒë·ªÉ backup. Bao
                        g·ªìm: Th√†nh vi√™n, ƒê·ªôi h√¨nh, Ho·∫°t ƒë·ªông, B√°o c√°o, Th·∫ª chi·∫øn sƒ©, ƒêƒÉng k√Ω.</p>

                    <div class="btn-row" style="gap:10px; flex-wrap:wrap;">
                        <button id="btn-backup-all-json" class="btn btn-primary">
                            <i class="fa-solid fa-download"></i> T·∫£i to√†n b·ªô (JSON)
                        </button>
                        <button id="btn-backup-users-json" class="btn btn-secondary">
                            <i class="fa-solid fa-users"></i> Ch·ªâ th√†nh vi√™n
                        </button>
                        <button id="btn-backup-activities-json" class="btn btn-secondary">
                            <i class="fa-solid fa-calendar"></i> Ch·ªâ ho·∫°t ƒë·ªông
                        </button>
                    </div>
                </div>

                <div class="card" style="margin-top:20px;">
                    <h3><i class="fa-solid fa-file-excel" style="color:#22c55e;"></i> Sao l∆∞u d·ªØ li·ªáu (Excel)</h3>
                    <p style="color:#666; margin-bottom:20px;">T·∫£i d·ªØ li·ªáu v·ªÅ m√°y d∆∞·ªõi d·∫°ng file Excel ƒë·ªÉ d·ªÖ d√†ng xem v√†
                        ch·ªânh s·ª≠a.</p>

                    <div class="btn-row" style="gap:10px; flex-wrap:wrap;">
                        <button id="btn-backup-all-excel" class="btn btn-success">
                            <i class="fa-solid fa-file-excel"></i> T·∫£i to√†n b·ªô (Excel)
                        </button>
                        <button id="btn-backup-users-excel" class="btn btn-secondary">
                            <i class="fa-solid fa-users"></i> Ch·ªâ th√†nh vi√™n
                        </button>
                        <button id="btn-backup-activities-excel" class="btn btn-secondary">
                            <i class="fa-solid fa-calendar"></i> Ch·ªâ ho·∫°t ƒë·ªông
                        </button>
                    </div>
                </div>


                <div class="card" style="margin-top:20px;">
                    <h3><i class="fa-solid fa-exclamation-triangle" style="color:#dc2626;"></i> V√πng nguy hi·ªÉm</h3>
                    <p style="color:#666; margin-bottom:20px;">C√°c thao t√°c kh√¥ng th·ªÉ ho√†n t√°c. C√¢n nh·∫Øc k·ªπ tr∆∞·ªõc khi
                        th·ª±c hi·ªán.</p>

                    <button id="btn-clear-activities" class="btn btn-danger" style="opacity:0.7;">
                        <i class="fa-solid fa-trash"></i> X√≥a to√†n b·ªô ho·∫°t ƒë·ªông
                    </button>
                </div>
            </section>

            <!-- Section: Settings - C√†i ƒë·∫∑t h·ªá th·ªëng -->
            <section id="section-settings" class="section">
                <div class="section-header">
                    <h1><i class="fa-solid fa-gear"></i> C√†i ƒë·∫∑t h·ªá th·ªëng</h1>
                </div>

                <!-- Super Admin Management -->
                <div class="card">
                    <h3><i class="fa-solid fa-user-shield" style="color:#dc2626;"></i> Qu·∫£n l√Ω Super Admin</h3>
                    <p style="color:#666; margin-bottom:20px;">
                        C√°c email trong danh s√°ch n√†y s·∫Ω t·ª± ƒë·ªông ƒë∆∞·ª£c c·∫•p quy·ªÅn Super Admin khi ƒëƒÉng nh·∫≠p.
                    </p>

                    <div style="display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap;">
                        <input type="email" id="new-super-admin-email" placeholder="Nh·∫≠p email Super Admin..."
                            style="flex:1; min-width:250px; padding:10px 15px; border:1px solid #ddd; border-radius:8px; font-size:14px;">
                        <button id="btn-add-super-admin" class="btn btn-primary">
                            <i class="fa-solid fa-plus"></i> Th√™m
                        </button>
                    </div>

                    <div id="super-admin-list" style="display:flex; flex-direction:column; gap:8px;">
                        <!-- JS will populate this -->
                        <p style="color:#888; text-align:center;"><i class="fa-solid fa-spinner fa-spin"></i> ƒêang
                            t·∫£i...</p>
                    </div>
                </div>

                <!-- Email Domain Whitelist -->
                <div class="card" style="margin-top:20px;">
                    <h3><i class="fa-solid fa-envelope-circle-check" style="color:#22c55e;"></i> Whitelist Domain Email
                    </h3>
                    <p style="color:#666; margin-bottom:20px;">
                        Ch·ªâ cho ph√©p ƒëƒÉng nh·∫≠p t·ª´ c√°c domain email ƒë∆∞·ª£c cho ph√©p (ƒë·ªÉ tr·ªëng = cho ph√©p t·∫•t c·∫£).
                    </p>

                    <div style="display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap;">
                        <input type="text" id="new-email-domain" placeholder="Nh·∫≠p domain (VD: st.uel.edu.vn)"
                            style="flex:1; min-width:200px; padding:10px 15px; border:1px solid #ddd; border-radius:8px; font-size:14px;">
                        <button id="btn-add-domain" class="btn btn-success">
                            <i class="fa-solid fa-plus"></i> Th√™m domain
                        </button>
                    </div>

                    <div id="allowed-domains-list" style="display:flex; flex-wrap:wrap; gap:10px;">
                        <!-- JS will populate this -->
                        <p style="color:#888;"><i class="fa-solid fa-spinner fa-spin"></i> ƒêang t·∫£i...</p>
                    </div>
                </div>
            </section>
        </main>
    </div>


    <!-- Modal X√°c nh·∫≠n & Th√¥ng b√°o t√πy ch·ªânh -->
    <div id="modal-confirm" class="modal-overlay" style="display:none;">
        <div class="modal-content modal-sm">
            <h3 id="modal-confirm-title"><i class="fa-solid fa-question-circle"></i> X√°c nh·∫≠n</h3>
            <p id="modal-confirm-message">B·∫°n c√≥ ch·∫Øc ch·∫Øn?</p>
            <div class="modal-actions">
                <button id="modal-confirm-cancel" class="btn btn-secondary">H·ªßy</button>
                <button id="modal-confirm-ok" class="btn btn-danger">X√°c nh·∫≠n</button>
            </div>
        </div>
    </div>

    <div id="modal-alert" class="modal-overlay" style="display:none;">
        <div class="modal-content modal-sm">
            <h3 id="modal-alert-title"><i class="fa-solid fa-info-circle"></i> Th√¥ng b√°o</h3>
            <p id="modal-alert-message">Th√¥ng b√°o...</p>
            <div class="modal-actions">
                <button id="modal-alert-ok" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- FLOATING SUPPORT BUTTON -->
    <a href="https://zalo.me/0899012608" target="_blank" class="support-pin" aria-label="Li√™n h·ªá h·ªó tr·ª£">
        <i class="fa-solid fa-headset"></i>
        <div class="support-tooltip">
            <strong>C·∫ßn h·ªó tr·ª£? Li√™n h·ªá:</strong>
            <div class="contact-line">
                <i class="fa-solid fa-user"></i> L√¢m Qu·ªëc Minh
            </div>
            <div class="contact-line">
                <i class="fa-solid fa-phone"></i> 0899.012.608 (Zalo)
            </div>
            <div class="contact-line">
                <i class="fa-brands fa-facebook"></i> fb.com/lamquocminh18
            </div>
        </div>
    </a>

    <!-- Scripts -->
    <script type="module" src="js/dashboard-core.js"></script>
</body>

</html>